language: cpp
os:
    - linux

addons:
    apt:
        sources:
            - george-edison55-precise-backports # for cmake 3.2.3
        packages:
            - cmake
            - cmake-data
sudo: true
before_install:
    - yes | sudo sudo add-apt-repository ppa:beineri/opt-qt561
    - sudo apt-get update
    - sudo apt-get install qt56base qt56tools --force-yes
# pulling just needed translation parts from liblxqt
    - wget https://raw.githubusercontent.com/lxde/liblxqt/master/cmake/modules/LXQtTranslateTs.cmake
    - wget https://raw.githubusercontent.com/lxde/liblxqt/master/cmake/modules/Qt5PatchedLinguistToolsMacros.cmake
# ...and modifying the CMakeLists.txt to not require whole liblxqt
    - sed -i'' -re '/^find_package\(lxqt / s/find_package\(lxqt/find_package(Qt5LinguistTools/' CMakeLists.txt
script: cmake -DCMAKE_MODULE_PATH=. -DCMAKE_PREFIX_PATH=/opt/qt56 . && make
